<html>
    <head>
        <script>
            const socket = new WebSocket('ws://localhost:8080/Connection/WebSocket');
            socket.onopen = function(){
                console.log("ciao")
            }

            socket.onmessage = function(ev){
                const para = document.createElement("p");
                const node = document.createTextNode(ev.data);
                para.appendChild(node);

                const element = document.getElementById("div1");
                element.appendChild(para);
                console.log(ev.data)
            }

            socket.onclose = function (e){
                console.log("connection closed");
            };

            window.addEventListener("unload", function () {
                if(socket.readyState == WebSocket.OPEN)
                    socket.close();
            });
        </script>
        <div id="div1">
            <p id="p1">This is a paragraph.</p>
            <p id="p2">This is another paragraph.</p>
        </div>
    </head>
</html>